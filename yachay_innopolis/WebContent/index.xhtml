<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<h:outputStylesheet library="css" link="css" name="style.css" />
	<link rel="shortcut icon" type="image/x-icon"
		href="resources/img/favicon.ico" />
	<title>EVENTOS Y RESERVA DE RECURSOS DEL CENTRO DE
		EMPRENDIMIENTO</title>
</h:head>
<body>
	<div class="ecuador-iso">
		<h:graphicImage id="bola" value="/resources/img/amalavida.png"></h:graphicImage>
	</div>
	<ui:insert name="contenido"></ui:insert>
	<div class="centrar">
		<b:carousel id="parque" interval="3000" showControls="false"
			style="img-responsive:true;">
			<b:carouselItem>
				<center>
					<p:graphicImage value="/resources/img/banner3.png"
						style="width:100%;height:200px; width:1450px;"
						showControls="false" />
				</center>
			</b:carouselItem>
			<b:carouselItem>
				<center>
					<p:graphicImage value="/resources/img/banner.png"
						style="width:100%;height:200px; width:1450px;"
						showControls="false" />
				</center>
			</b:carouselItem>
			<b:carouselItem>
				<center>
					<p:graphicImage value="/resources/img/banner2.png"
						style="width:100%;height:200px; width:1450px;"
						showControls="false" />
				</center>
			</b:carouselItem>
		</b:carousel>
		<p:growl id="message5" showDetail="false" />
		<h:form id="form5">
		</h:form>
		<h:form>
			<p:menubar>
				<p:menuitem value="Iniciar Sesi&oacute;n" onclick="PF('ic').show();"
					icon=" ui-icon-power"></p:menuitem>
				<p:menuitem value="Recuperar contraseña"
					onclick="PF('dlg4').show();" icon="ui-icon-lightbulb" />
				<p:menuitem value="Regístrarme" action="/ingresousuario.xhtml"
					icon="ui-icon-contact" />
				<p:submenu label="Ayuda" icon="ui-icon-help">
					<p:menuitem value="Manual de usuario" target="_blank"
						url="/manual/ManualdeUsuarioSolicitante.pdf" />
				</p:submenu>
				<f:facet name="options">
				</f:facet>
			</p:menubar>
		</h:form>
		<hr />
		<p:dialog widgetVar="ic" modal="true" showEffect="fade" closable="true" closeOnEscape="true"
			header="Sistema REGECE - Yachay" hideEffect="fade" resizable="false">

			<div class="form-bottom">
				<div class="form-box">
					<h2>
						<b style="color: #46a3ca; font-size: 12pt;"> Ingreso al
							Sistema</b> <i class="fa fa-calendar-check-o fa-1x"
							style="color: #46a3ca;"></i>
					</h2>
				</div>

				<h:form id="frmlog">
					<p:messages closable="true" />
					<b:inputText placeholder="CÉDULA" value="#{sessionBean.nick}"
						disabled="false">
						<p:ajax listener="#{sessionBean.veri()}" id="cedula"></p:ajax>
					</b:inputText>
					<b:inputSecret placeholder="CONTRASE&Ntilde;A" disabled="false"
						value="#{sessionBean.pass}">
					</b:inputSecret>
					<b:commandButton value="Ingresar" iconAwesome="check-square-o"
						action="#{sessionBean.login}" styleClass="btn-block btnSend"
						look="primary" update=":frmlog" />
				</h:form>
			</div>
		</p:dialog>

		<p:dialog header="Recuperar contraseña" resizable="false"
			closable="true" closeOnEscape="false" widgetVar="dlg4" modal="true"
			showEffect="explode" hideEffect="bounce" height="150">
			<div class="div1" style="width: 100%">
				<h:form id="form3">
					<p:growl id="message3" showDetail="false" />
					<h:outputText
						value="Al momento de enviar el mensaje para la recuperación de la contraseña," />
					<br />
					<h:outputText value="espere la alerta de confimación." />
					<p:panelGrid columns="2">
						<h:outputText value="Ingrese su correo: "  for="correo"/>
						<p:inputText id="correo" required="true" value="#{sessionBean.correocontra}" size="40"
							 requiredMessage="Requerido Correo"
							validatorMessage="Formato de correo inv&aacute;lido">
							<f:validateRegex
								pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
						</p:inputText>
						<h:outputText value="" />
						<h:outputText value="" />
						<p:commandButton id="trackcer1" icon="ui-icon-key"
							value="Enviar contraseña"
							widgetVar="startButton1" update=":form5 :message5"  onclick="PF('dlgLoad').show();"
							oncomplete="PF('dlgLoad').hide();" action="#{sessionBean.devolvercontra}">
							<p:tooltip id="toolTipTrack8" for="trackcer1"
								value="Enviar mensaje para recuperar contraseña"
								trackMouse="true" />
						</p:commandButton>
						</p:panelGrid>
				</h:form>
			</div>
		</p:dialog>
		<p:dialog widgetVar="dlgLoad" modal="true" draggable="false"
				closable="false" resizable="false" showHeader="false">
				<h:form>
					<p:graphicImage value="/resources/img/loader.gif" />
				</h:form>
			</p:dialog>
		<p:tabView dynamic="true" cache="true">
			<p:tab title="Bienvenidos">
				<center>
					<b:image style="height:450px; width:1200px;"
						value="/resources/img/ccep.png" styleClass="img-responsive" />
				</center>
			</p:tab>
			<p:tab title="Calendario">
				<h:form id="form">
					<p:growl id="messages" showDetail="false" />
					<div align="right">
						<p:outputLabel value="Eventos: "></p:outputLabel>
						<p:selectOneMenu required="true" styleClass="t"
							value="#{calusrBean.te}" requiredMessage="Requerido tipo">
							<f:selectItem itemLabel="Listar todos" itemValue="0" />
							<f:selectItems value="#{calusrBean.listaEveTipo}" />
							<p:ajax listener="#{calusrBean.asignarTipoeve()}" update="form">
							</p:ajax>
						</p:selectOneMenu>
						&nbsp; &nbsp;
						<p:outputLabel value="Ubicación: "></p:outputLabel>
						<p:selectOneMenu required="true" styleClass="t"
							value="#{calusrBean.sala}" requiredMessage="Requerido ubicación">
							<f:selectItem itemLabel="Listar todos" itemValue="0" />
							<f:selectItems value="#{calusrBean.listaUbicacion}" />
							<p:ajax listener="#{calusrBean.asignarsala()}" update="form">
							</p:ajax>
						</p:selectOneMenu>
					</div>
					<h3 style="margin-top: 0">Calendario</h3>
					<p:schedule id="schedule" value="#{calusrBean.eventModel}"
						widgetVar="myschedule" locale="es" timeZone="GMT-5"
						showHeader="true" draggable="false" resizable="false">
						<p:ajax event="eventSelect" listener="#{calusrBean.onEventSelect}"
							update="dialog eventDetails"
							oncomplete="PF('eventDialog').show();" />
					</p:schedule>

					<p:dialog id="dialog" widgetVar="eventDialog" closable="true"
						closeOnEscape="true" header="#{calusrBean.event.title}"
						width="60%" showEffect="clip" hideEffect="clip">
						<h:panelGrid id="eventDetails">
							<b:row>
								<b:column span="3">
									<p:graphicImage height="100" width="100"
										value="resources/img/imgevent/#{calusrBean.event.data.imagen}" />
								</b:column>
								<b:column span="9">
									<b:row>
										<b:column span="4">
											<b><h:outputLabel for="from" value="Descripci&oacute;n:"
													rendered="#{!calusrBean.event.data.interno}"></h:outputLabel></b>
										</b:column>
										<b:column span="5">
											<h:outputText id="from"
												value="#{calusrBean.event.data.descripcion}"
												rendered="#{!calusrBean.event.data.interno}" />
										</b:column>
									</b:row>
									<b:row>
										<b:column span="4">
											<b><h:outputLabel for="date" value="Fecha Inicio:" /></b>
										</b:column>
										<b:column span="5">
											<h:outputText id="date"
												value="#{calusrBean.event.startDate}">
												<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"
													timeZone="GMT-5" />
											</h:outputText>
										</b:column>
									</b:row>
									<b:row>
										<b:column span="4">
											<b><h:outputLabel for="date1" value="Fecha Fin:" /></b>
										</b:column>
										<b:column span="5">
											<h:outputText id="date1" value="#{calusrBean.event.endDate}">
												<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"
													timeZone="GMT-5" />
											</h:outputText>
										</b:column>
									</b:row>
									<b:row>
										<b:column span="4">
											<b><h:outputLabel for="tc" value="Tipo Evento:" /></b>
										</b:column>
										<b:column span="5">
											<h:outputText id="tc"
												value="#{calusrBean.event.data.tipoevento.tipo}" />
										</b:column>
									</b:row>
									<b:row>
										<b:column span="4">
											<b><h:outputLabel for="ubi" value="Ubicación:" /></b>
										</b:column>
										<b:column span="5">
											<h:outputText id="ubi"
												value="#{calusrBean.event.data.sala.tipo}" />
										</b:column>
									</b:row>
									<b:row>
										<b:column span="4">
											<b><h:outputLabel for="ca" value="Capacidad:" /></b>
										</b:column>
										<b:column span="5">
											<h:outputText id="ca"
												value="#{calusrBean.event.data.cantidad}" />
										</b:column>
									</b:row>
									<b:row>
										<b:column span="4">
											<b><h:outputLabel for="co" value="Costo:" /></b>
										</b:column>
										<b:column span="2">
											<h:outputText id="co" value="#{calusrBean.event.data.costo}" />
											<h:outputText value="" />
										</b:column>
									</b:row>
									<p:commandButton id="addButton" value="Inscr&iacute;bete"
										action="#{calusrBean.irInscripcion}"
										rendered="#{!calusrBean.event.data.interno}"
										oncomplete="PF('myschedule').update();PF('eventDialog').hide(); :message5">
										<p:tooltip id="toolTipTrac1" for="addButton"
											value="Bot&oacute;n para registrarse al evento"
											trackMouse="true" />
									</p:commandButton>
								</b:column>
							</b:row>
						</h:panelGrid>
					</p:dialog>
				</h:form>
				<script type="text/javascript">
		PrimeFaces.locales['es'] = {
			closeText : 'Cerrar',
			prevText : 'Anterior',
			nextText : 'Siguiente',
			monthNames : [ 'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo',
					'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre',
					'Noviembre', 'Diciembre' ],
			monthNamesShort : [ 'Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun',
					'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic' ],
			dayNames : [ 'Domingo', 'Lunes', 'Martes', 'Mi&eacute;rcoles', 'Jueves',
					'Viernes', 'SÃ¡bado' ],
			dayNamesShort : [ 'Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab' ],
			dayNamesMin : [ 'D', 'L', 'M', 'X', 'J', 'V', 'S' ],
			weekHeader : 'Semana',
			firstDay : 1,
			isRTL : false,
			showMonthAfterYear : false,
			yearSuffix : '',
			timeOnlyTitle : 'S&oacute;lo hora',
			timeText : 'Tiempo',
			hourText : 'Hora',
			minuteText : 'Minuto',
			secondText : 'Segundo',
			currentText : 'Fecha actual',
			ampm : true,
			month : 'Mes',
			week : 'Semana',
			day : 'D&iacute;a',
			allDayText : 'Todo el d&iacute;a'
		};
	</script>
			</p:tab>
			<p:tab title="Lista de Eventos">
				<div class="div4">
					<h:form id="form4">
						<p:growl id="message4" showDetail="false" />
						<p:dataTable id="dt" value="#{calusrBean.listEvenAct}" rows="5"
							var="reg" reflow="true"
							paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {exp}"
							paginator="true" emptyMessage="No hay información almacenada">
							<f:facet name="{exp}">
								<h:commandLink>
									<!--   <h:graphicImage value="/resources/img/excel.png" width="24"/> -->
									<p:button value="Excel" />
									<p:dataExporter type="xls" target="dt"
										fileName="usuarios_registrados" pageOnly="true" />
								</h:commandLink>
								<h:commandLink>
									<!--   <h:graphicImage value="/resources/img/pdf.png" width="24"/> -->
									<p:button value="Pdf" id="exp2" />
									<p:dataExporter type="pdf" target="dt"
										fileName="usuarios_registrados" pageOnly="true" />
								</h:commandLink>
							</f:facet>
							<p:column id="f1" headerText="Eventos" width="160">
								<h:outputText value="#{calusrBean.valorInterno(reg)}"></h:outputText>
							</p:column>
							<p:column headerText="Costo" sortBy="#{reg.costo}" width="60">
								<h:outputText value="#{reg.costo}"></h:outputText>
							</p:column>
							<p:column headerText="Fecha Inicio" sortBy="#{reg.fechaInicio}" width="120">
								<h:outputText value="#{reg.fechaInicio}">
									<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
								</h:outputText>
							</p:column>
							<p:column headerText="Fecha Fin" sortBy="#{reg.fechaFin}" width="120">
								<h:outputText value="#{reg.fechaFin}">
									<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
								</h:outputText>
							</p:column>
							<p:column id="f3" filterBy="#{reg.tipoevento.tipo}" width="100"
								sortBy="#{reg.tipoevento.tipo}" headerText="Tipo Evento">
								<h:outputText value="#{reg.tipoevento.tipo}"></h:outputText>
							</p:column>
							<p:column id="f9" filterBy="#{reg.sala.tipo}" width="120"
								sortBy="#{reg.sala.tipo}" headerText="Sala">
								<h:outputText value="#{reg.sala.tipo}"
									style="color: \##{reg.sala.colorsala.colorcod}"></h:outputText>
							</p:column>
							<p:column id="f4" filterBy="#{reg.cantidad}" width="70"
								sortBy="#{reg.cantidad}"  headerText="Capacidad">
								<h:outputText value="#{reg.cantidad}"></h:outputText>
							</p:column>

							<p:column id="f5"  width="70"
								headerText="Reunión Privada">
								<p:selectBooleanCheckbox value="#{reg.interno}" disabled="true">
								</p:selectBooleanCheckbox>
							</p:column>
							<p:column headerText="Imagen" exportable="false" width="120">
								<p:graphicImage width="100" height="100"
									value="resources/img/imgevent/#{reg.imagen}"></p:graphicImage>
							</p:column>
							<p:column headerText="Opciones" exportable="false" width="80">
								<p:commandButton id="addButton" value="Inscr&iacute;bete"
									action="#{calusrBean.irInscripcion1(reg)}" update=":message5">
									<p:tooltip id="toolTipTrac1" for="addButton"
										value="Bot&oacute;n para registrarse al evento"
										trackMouse="true" />
								</p:commandButton>
							</p:column>
						</p:dataTable>
						<p:dialog header="Imagen" modal="true" closable="true"
							closeOnEscape="true" showEffect="fade" hideEffect="fade"
							resizable="false" widgetVar="imagendlg" id="imagendlg">
							<p:panelGrid id="imagen1" columns="1">
								<f:facet name="header">
								</f:facet>
							</p:panelGrid>
						</p:dialog>
					</h:form>
				</div>
				<hr />
			</p:tab>
		</p:tabView>
	</div>

</body>
</html>