<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<h:outputStylesheet library="css" name="styleser.css" />
<title>Crear Eventos</title>
</h:head>
<body>
<h:form enctype="multipart/form-data">  
    <p:menubar>
        <p:menuitem value="Eventos" action="#{recursosBean.irRec}" icon="ui-icon-clipboard" />
        <p:menuitem value="Crear Eventos" action="#{recursosBean.irTrecurso}" icon="ui-icon-pencil" />
        <p:menuitem value="Tipo Evento" action="#{recursosBean.irTrecurso}" icon="ui-icon-pencil" />
        <f:facet name="options">
            <p:commandButton type="button" value="Salir" icon="ui-icon-home" />
        </f:facet>
    </p:menubar>
</h:form>
<hr/>
<div class="div1">
<h:form id="form2">
	<p:growl id="message" showDetail="true" />
	<p:panel id="panel2"  header="Registro de Eventos">
		<p:panelGrid  columns="2" >
			<h:outputText value="Nombre*:"/>
			<p:inputText styleClass="t" required="true" id="nom" value="#{eventosBean.nombre}" requiredMessage="Requerido nombre">
				<p:ajax  listener="#{eventosBean.asignarNombreImg}" />
			</p:inputText>
			<h:outputText value="Descripción:"/>
			<p:inputTextarea styleClass="t" required="true" id="can" value="#{eventosBean.descripcion}" requiredMessage="Requerido Descripcion">
			<f:validateLength minimum="10"/>
			</p:inputTextarea>
			<h:outputText value="Dirección:"/>
			<p:inputText styleClass="t" required="true" id="des" value="#{eventosBean.lugar}" requiredMessage="Requerido Dirección"></p:inputText>
			<h:outputText value="Costo:"/>
			<p:inputText styleClass="t" required="true" id="lug" value="#{eventosBean.costo}" requiredMessage="Requerido Costo">
			<f:validateLength minimum="1"/>
			</p:inputText>
			<h:outputText value="Fecha*:"/>
			<p:calendar required="true" requiredMessage="Requerido Fecha" id="fecha" value="#{eventosBean.fecha}" pattern="yyyy-MM-dd" mask="true" />
			<h:outputText value="Tipo Eventos:"/>
			<h:panelGroup>  
					<p:selectOneMenu required="true" styleClass="t" value="#{eventosBean.te}" requiredMessage="Requerido Evento">
						<f:selectItem  itemLabel="Seleccione...!!!!" itemValue="" />
						<f:selectItems value="#{eventosBean.listaEveTipo}" />
						<p:ajax
							listener="#{eventosBean.asignarTipoeve()}">
						</p:ajax>
					</p:selectOneMenu>
			</h:panelGroup>
			<h:outputText value="Capacidad:"/>
			<p:inputText styleClass="t" required="true" id="cap" value="#{eventosBean.cantidad}" requiredMessage="Requerido Capacidad">
			<f:validateLength minimum="1"/>
			</p:inputText>
			<h:outputText value="Imagen:"/>
			 <p:fileUpload mode="advanced" dragDropSupport="true" update=":form2:message :form2:imagen" sizeLimit="100000" 
    		allowTypes="/(\.|\/)(jpe?g)$/" cancelLabel="Cancelar" uploadLabel="Subir" label="Seleccionar" fileLimit="1" fileUploadListener="#{eventosBean.ImagenServ}"/>
   			 <h:outputText value="Vista Previa:"/>
   			 <p:graphicImage id="imagen" value="/imgevent/#{eventosBean.imagen}" width="150" height="150" />
   			 <p:commandButton style="width:100%" update="panel2 message" value="Guardar Evento" action="#{eventosBean.crearEvento}">
   			 </p:commandButton>
   			 <p:commandButton style="width:100%" update="panel2 message" value="Crear Solicitud para el Evento" action="#{eventosBean.irSolicitud}">
   			 </p:commandButton>
		</p:panelGrid>
	</p:panel>
</h:form>
</div>
<div class="div2">
<!-- h:graphicImage id="img1" value="/resources/img/logo.png"></h:graphicImage-->
</div>
</body>
</html>